# Allow from specific CIDR blocks (e.g., corporate VPN)
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-from-corporate-network
  namespace: network-policy-lab
spec:
  podSelector: {}
  policyTypes:
  - Ingress
  ingress:
  - from:
    - ipBlock:
        cidr: 10.100.0.0/16  # Corporate VPN range
    ports:
    - protocol: TCP
      port: 443
    - protocol: TCP
      port: 22
---
# Allow egress to specific cloud services
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-egress-to-aws-services
  namespace: network-policy-lab
spec:
  podSelector:
    matchLabels:
      app: aws-integration
  policyTypes:
  - Egress
  egress:
  - to:
    - ipBlock:
        cidr: 54.240.0.0/12  # Example AWS region CIDR
    ports:
    - protocol: TCP
      port: 443